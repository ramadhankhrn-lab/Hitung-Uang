<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Keuangan Modern</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --glass: rgba(255,255,255,.15);
  --border: rgba(255,255,255,.35);
  --text: #fff;
  --green:#22c55e;
  --red:#ef4444;
  --orange:#f59e0b;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Segoe UI,sans-serif;
  min-height:100vh;
  background:
    linear-gradient(rgba(0,0,0,.55),rgba(0,0,0,.55)),
    url("https://files.catbox.moe/t234u7.jpg") center/cover fixed;
  color:var(--text);
  padding:20px;
}

h2{text-align:center}

.container{
  max-width:900px;
  margin:auto;
  display:grid;
  gap:20px;
}

.card{
  background:var(--glass);
  backdrop-filter:blur(14px);
  border:1px solid var(--border);
  border-radius:18px;
  padding:18px;
}

input,button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:12px;
  border:none;
}

input{
  background:rgba(255,255,255,.25);
  color:#fff;
}

button{font-weight:600;cursor:pointer}
.btn-green{background:var(--green)}
.btn-orange{background:var(--orange);color:#000}
.btn-red{background:var(--red)}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
  font-size:14px;
}

td{
  padding:8px;
  border-bottom:1px solid var(--border);
}

.saldo{
  font-size:26px;
  font-weight:bold;
  text-align:center;
}

.date{
  margin-top:15px;
  font-weight:bold;
  opacity:.9;
}
</style>
</head>
<body>

<h2>ðŸ’° Catatan Keuangan</h2>

<div class="container">

<div class="card">
<h3>âž• Pemasukan</h3>
<input id="produkMasuk" placeholder="Nama Produk">
<input id="hargaMasuk" type="number" placeholder="Harga (Rp)">
<button class="btn-green" onclick="tambahPemasukan()">Tambah</button>
</div>

<div class="card">
<h3>âž– Pengeluaran</h3>
<input id="produkKeluar" placeholder="Nama Pengeluaran">
<input id="hargaKeluar" type="number" placeholder="Harga (Rp)">
<button class="btn-orange" onclick="tambahPengeluaran()">Tambah</button>
</div>

<div class="card">
<h3>ðŸ“œ History Per Hari</h3>
<div id="history"></div>
</div>

<div class="card">
<div class="saldo">Saldo: <span id="saldo">Rp 0</span></div>
<button class="btn-red" onclick="resetSaldo()">Reset Saldo</button>
</div>

</div>

<script>
let data = JSON.parse(localStorage.getItem("keuangan")) || {};

const today = new Date().toLocaleDateString("id-ID");
const rupiah = n => "Rp " + n.toLocaleString("id-ID");

function simpan(){
  localStorage.setItem("keuangan", JSON.stringify(data));
}

function tambahPemasukan(){
  tambahData("pemasukan", produkMasuk.value, hargaMasuk.value);
  produkMasuk.value=""; hargaMasuk.value="";
}

function tambahPengeluaran(){
  tambahData("pengeluaran", produkKeluar.value, hargaKeluar.value);
  produkKeluar.value=""; hargaKeluar.value="";
}

function tambahData(jenis, produk, harga){
  harga = parseInt(harga);
  if(!produk || isNaN(harga)) return alert("Isi data!");

  if(!data[today]) data[today] = [];
  data[today].push({jenis, produk, harga});
  simpan(); render();
}

function render(){
  let saldo = 0;
  history.innerHTML = "";

  Object.keys(data).forEach(tgl=>{
    history.innerHTML += `<div class="date">ðŸ“… ${tgl}</div><table>`;
    data[tgl].forEach((x,i)=>{
      saldo += x.jenis === "pemasukan" ? x.harga : -x.harga;
      history.innerHTML += `
        <tr>
          <td>${x.jenis==="pemasukan" ? "âž•" : "âž–"} ${x.produk}</td>
          <td style="text-align:right">${rupiah(x.harga)}</td>
          <td style="width:60px">
            <button class="btn-red" onclick="hapus('${tgl}',${i})">âœ–</button>
          </td>
        </tr>`;
    });
    history.innerHTML += `</table>`;
  });

  saldoEl.innerText = rupiah(saldo);
}

function hapus(tgl,i){
  if(confirm("Hapus data ini?")){
    data[tgl].splice(i,1);
    if(data[tgl].length===0) delete data[tgl];
    simpan(); render();
  }
}

function resetSaldo(){
  if(confirm("Reset semua data?")){
    localStorage.clear();
    data = {};
    render();
  }
}

const saldoEl = document.getElementById("saldo");
render();
</script>

</body>
</html>
