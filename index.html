<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Catatan Keuangan</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f4f4;
            padding: 20px;
        }
        h2 { text-align: center; }
        .box {
            background: white;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        input, button {
            width: 100%;
            padding: 10px;
            margin-top: 8px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 8px;
            text-align: center;
        }
        .saldo {
            font-size: 20px;
            font-weight: bold;
            text-align: center;
        }
        .reset {
            background: red;
            margin-top: 10px;
        }
    </style>
</head>
<body>

<h2>ðŸ“Š Catatan Keuangan</h2>

<div class="box">
    <h3>âž• Pemasukan</h3>
    <input type="text" id="produkMasuk" placeholder="Nama Produk">
    <input type="number" id="hargaMasuk" placeholder="Harga (Rp)">
    <button onclick="tambahPemasukan()">Tambah</button>
</div>

<div class="box">
    <h3>âž– Pengeluaran</h3>
    <input type="text" id="produkKeluar" placeholder="Nama Pengeluaran">
    <input type="number" id="hargaKeluar" placeholder="Harga (Rp)">
    <button onclick="tambahPengeluaran()">Tambah</button>
</div>

<div class="box">
    <h3>ðŸ“¥ Pemasukan</h3>
    <table>
        <thead>
            <tr><th>Produk</th><th>Harga</th></tr>
        </thead>
        <tbody id="listMasuk"></tbody>
    </table>
    Total: <span id="totalMasuk">Rp 0</span>
</div>

<div class="box">
    <h3>ðŸ“¤ Pengeluaran</h3>
    <table>
        <thead>
            <tr><th>Pengeluaran</th><th>Harga</th></tr>
        </thead>
        <tbody id="listKeluar"></tbody>
    </table>
    Total: <span id="totalKeluar">Rp 0</span>
</div>

<div class="box">
    <div class="saldo">
        ðŸ’° Saldo: <span id="saldo">Rp 0</span>
    </div>
    <button class="reset" onclick="resetData()">Reset Semua Data</button>
</div>

<script>
    let totalMasuk = 0;
    let totalKeluar = 0;

    function formatRupiah(angka) {
        return "Rp " + angka.toLocaleString("id-ID");
    }

    function simpanData() {
        localStorage.setItem("totalMasuk", totalMasuk);
        localStorage.setItem("totalKeluar", totalKeluar);
        localStorage.setItem("listMasuk", document.getElementById("listMasuk").innerHTML);
        localStorage.setItem("listKeluar", document.getElementById("listKeluar").innerHTML);
    }

    function muatData() {
        totalMasuk = parseInt(localStorage.getItem("totalMasuk")) || 0;
        totalKeluar = parseInt(localStorage.getItem("totalKeluar")) || 0;

        document.getElementById("listMasuk").innerHTML = localStorage.getItem("listMasuk") || "";
        document.getElementById("listKeluar").innerHTML = localStorage.getItem("listKeluar") || "";

        document.getElementById("totalMasuk").innerText = formatRupiah(totalMasuk);
        document.getElementById("totalKeluar").innerText = formatRupiah(totalKeluar);
        hitungSaldo();
    }

    function tambahPemasukan() {
        let produk = produkMasuk.value;
        let harga = parseInt(hargaMasuk.value);

        if (!produk || isNaN(harga)) return alert("Isi data!");

        totalMasuk += harga;
        listMasuk.innerHTML += `<tr><td>${produk}</td><td>${formatRupiah(harga)}</td></tr>`;
        totalMasukEl = document.getElementById("totalMasuk");
        totalMasukEl.innerText = formatRupiah(totalMasuk);

        simpanData();
        hitungSaldo();

        produkMasuk.value = "";
        hargaMasuk.value = "";
    }

    function tambahPengeluaran() {
        let produk = produkKeluar.value;
        let harga = parseInt(hargaKeluar.value);

        if (!produk || isNaN(harga)) return alert("Isi data!");

        totalKeluar += harga;
        listKeluar.innerHTML += `<tr><td>${produk}</td><td>${formatRupiah(harga)}</td></tr>`;
        document.getElementById("totalKeluar").innerText = formatRupiah(totalKeluar);

        simpanData();
        hitungSaldo();

        produkKeluar.value = "";
        hargaKeluar.value = "";
    }

    function hitungSaldo() {
        document.getElementById("saldo").innerText =
            formatRupiah(totalMasuk - totalKeluar);
    }

    function resetData() {
        if (confirm("Yakin hapus semua data?")) {
            localStorage.clear();
            location.reload();
        }
    }

    // Load data saat web dibuka
    muatData();
</script>

</body>
</html>
